(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"09ba":function(t,e,a){"use strict";a("836c")},"0c6a":function(t,e,a){},"1d81":function(t,e,a){"use strict";a("7d6f")},"248e":function(t,e,a){"use strict";a("df48")},"3c60":function(t,e,a){"use strict";a("7f01")},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},4922:function(t,e,a){"use strict";a("763f")},5554:function(t,e,a){"use strict";a("70ba")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t._self._c;return e("a-config-provider",{attrs:{locale:t.locale}},[e("div",{attrs:{id:"app"}},[e("router-view")],1)])},n=[],r=a("677e"),o=a.n(r),l={data(){return{locale:o.a}}},c=l,d=a("2877"),u=Object(d["a"])(c,i,n,!1,null,null,null),p=u.exports,m=a("8c4f"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"loginBox"},[e("h1",{staticStyle:{"margin-left":"150px",color:"white"}},[t._v("虚拟卡账单管理系统")]),e("a-form-model",{ref:"loginFormRef",staticClass:"loginForm",attrs:{rules:t.rules,model:t.formdata,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{prop:"username",label:"用户名",className:"lableContent"}},[e("a-input",{attrs:{placeholder:"请输入用户名",size:"large"},model:{value:t.formdata.username,callback:function(e){t.$set(t.formdata,"username",e)},expression:"formdata.username"}},[e("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e("a-form-model-item",{attrs:{prop:"password",label:t.label.password,className:"lableContent"}},[e("a-input",{attrs:{placeholder:"请输入密码",type:"password",size:"large"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login.apply(null,arguments)}},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}},[e("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e("a-form-model-item",{staticClass:"loginBtn"},[e("a-button",{staticStyle:{"margin-left":"60px"},attrs:{type:"primary",size:"large"},on:{click:t.login}},[t._v("登录 ")]),e("a-button",{staticStyle:{"margin-left":"60px"},attrs:{type:"info",size:"large"},on:{click:t.resetForm}},[t._v(" 取消")])],1)],1)],1)])},f=[],g=(a("14d9"),a("2f62")),y={data(){return{labelCol:{span:5},wrapperCol:{span:19},label:{password:"密    码"},formdata:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:12,message:"用户名必须在3-12个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码必须在6-20个字符之间",trigger:"blur"}]}}},methods:{...Object(g["b"])(["updateUserRole"]),resetForm(){this.$refs.loginFormRef.resetFields()},login(){this.$refs.loginFormRef.validate(async t=>{if(!t)return this.$message.error("输入非法数据，请重新输入");{const{data:t}=await this.$http.post("/login",this.formdata);if(200!=t.status)return this.$message.error(t.message);window.sessionStorage.setItem("token",t.token),this.$router.push("/addart"),this.updateUserRole(t.role)}})}}},b=y,_=(a("3c60"),Object(d["a"])(b,h,f,!1,null,"4cf7c5df",null)),k=_.exports,v=function(){var t=this,e=t._self._c;return e("a-layout",{attrs:{id:"components-layout-demo-custom-trigger"}},[e("a-layout-sider",{attrs:{trigger:null,collapsible:"",width:"250"},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[e("div",{staticClass:"title"},[t._v(" FB虚拟卡账单管理系统 ")]),e("a-menu",{attrs:{theme:"dark",mode:"inline"},on:{click:t.goToPage}},[e("a-sub-menu",[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"file"}}),e("span",[t._v("账单管理")])],1),e("a-menu-item",{key:"addart"},[e("a-icon",{attrs:{type:"form"}}),e("span",[t._v("虚拟卡账单")])],1),e("a-menu-item",{key:"artlist"},[e("a-icon",{attrs:{type:"snippets"}}),e("span",[t._v("facebook账单")])],1),e("a-menu-item",{key:"catelist"},[e("a-icon",{attrs:{type:"book"}}),e("span",[t._v("虚拟卡余额和消耗计算")])],1)],1),1==t.userRole?e("a-menu-item",{key:"userlist"},[e("a-icon",{attrs:{type:"upload"}}),e("span",[t._v("用户列表")])],1):t._e()],1)],1),e("a-layout",[e("a-layout-header",{staticStyle:{background:"#fff",padding:"0"}},[e("a-icon",{staticClass:"trigger",attrs:{type:t.collapsed?"menu-unfold":"menu-fold"},on:{click:()=>t.collapsed=!t.collapsed}}),e("a-button",{attrs:{type:"danger"},on:{click:t.loginOut}},[t._v("退出")])],1),e("a-layout-content",{style:{margin:"24px 16px",background:"#fff",minHeight:"280px"}},[e("router-view",{key:t.$router.path})],1),e("a-layout-footer",{staticStyle:{background:"#fff",padding:"0"}},[e("Footer")],1)],1)],1)},w=[],j=function(){var t=this,e=t._self._c;return e("div",[e("a-layout-sider",{attrs:{trigger:null,collapsible:""},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[e("div",{staticClass:"logo"}),e("a-menu",{attrs:{theme:"dark",mode:"inline"}},[e("a-menu-item",[e("a-icon",{attrs:{type:"dashboard"}}),e("span",[t._v("仪表盘")])],1),e("a-sub-menu",{attrs:{title:"文章管理"}},[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"file"}}),e("span",[t._v("文章管理")])],1),e("a-menu-item",[e("a-icon",{attrs:{type:"form"}}),e("span",[t._v("写文章")])],1),e("a-menu-item",[e("a-icon",{attrs:{type:"snippets"}}),e("span",[t._v("文章列表")])],1)],1),e("a-menu-item",[e("a-icon",{attrs:{type:"book"}}),e("span",[t._v("分类列表")])],1),e("a-menu-item",[e("a-icon",{attrs:{type:"upload"}}),e("span",[t._v("用户列表")])],1)],1)],1)],1)},$=[],x={data(){return{collapsed:!1}}},C=x,O=(a("5554"),Object(d["a"])(C,j,$,!1,null,"deb5d6e8",null)),q=O.exports,I=function(){var t=this;t._self._c;return t._m(0)},z=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("span",[t._v("----- Blog Admin -----")])])}],A=(a("4922"),{}),S=Object(d["a"])(A,I,z,!1,null,"a3e76d3c",null),L=S.exports,U={data(){return{collapsed:!1}},methods:{loginOut(){window.sessionStorage.clear("token"),this.$router.push("/login")},goToPage(t){this.$router.push("/"+t.key).catch(t=>t)}},computed:{...Object(g["c"])(["userRole"])},components:{Nav:q,Footer:L}},P=U,B=(a("bfd7"),Object(d["a"])(P,v,w,!1,null,null,null)),V=B.exports,N=function(){var t=this;t._self._c;return t._m(0)},F=[function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("欢迎来到虚拟卡管理系统后台管理页面")])])}],R={},D=Object(d["a"])(R,N,F,!1,null,null,null),E=D.exports,T=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("h3",[t._v("虚拟卡列表")]),e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:4}},[e("a-cascader",{attrs:{allowClear:"",options:t.cardNumber_options,placeholder:"请输入卡号查找"},on:{change:t.getArticleList},model:{value:t.querydata.card_number,callback:function(e){t.$set(t.querydata,"card_number",e)},expression:"querydata.card_number"}})],1),e("a-col",{attrs:{span:4}},[e("a-cascader",{attrs:{allowClear:"",options:t.options,placeholder:"请输入支付类型查找"},on:{change:t.getArticleList},model:{value:t.querydata.transaction_type,callback:function(e){t.$set(t.querydata,"transaction_type",e)},expression:"querydata.transaction_type"}})],1),e("a-col",{attrs:{span:5}},[e("a-cascader",{attrs:{allowClear:"",options:t.bridgeOptions,placeholder:"请选择是否出现FB账单"},on:{change:t.getArticleList},model:{value:t.querydata.is_judge,callback:function(e){t.$set(t.querydata,"is_judge",e)},expression:"querydata.is_judge"}})],1),e("a-col",{attrs:{span:5}},[e("a-range-picker",{on:{change:t.getArticleList},model:{value:t.time_range,callback:function(e){t.time_range=e},expression:"time_range"}})],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getArticleList}},[t._v("查询")])],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getClear}},[t._v("置空")])],1)],1),e("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("虚拟卡文件导入")]),e("a-modal",{attrs:{title:"批量导入"},on:{ok:t.handleOk},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e("p",[t._v("为确保导入数据格式正确，请按照格式规范录入数据")]),e("a-upload-dragger",{attrs:{name:"f1",multiple:!0,action:"http://111.90.143.10:39010/api/v1/upload1"},on:{change:t.handleChangeFile},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},[e("p",{staticClass:"ant-upload-drag-icon"},[e("a-icon",{attrs:{type:"cloud-download"}})],1),e("p",{staticClass:"ant-upload-text"},[t._v("点击或将文件拖拽到这里上传")]),e("p",{staticClass:"ant-upload-hint"},[t._v(" 仅支持*xls文件 ")])]),e("div",{staticClass:"upload-tips"},[e("p",[t._v("1.仅支持*xls文件")]),e("p",[t._v("2.导入数量不得超过5000条")]),e("p",[t._v("3.文件大小不得超过3M")])])],1),e("a-table",{attrs:{rowKey:(t,e)=>e,columns:t.columns,pagination:t.paginationOption,dataSource:t.Articlelist,bordered:""},scopedSlots:t._u([{key:"is_judge",fn:function(a){return[e("span",{style:{color:a.is_judge?"red":"green"}},[t._v(" "+t._s(a.is_judge?"否":"是")+" ")])]}}])})],1)],1)},M=[],K=(a("380f"),a("f64c"));a("c1df");const Z=[{title:"ID",dataIndex:"transaction_id",width:"15%",key:"transaction_id",align:"center"},{title:"时间",dataIndex:"transaction_time",width:"15%",key:"transaction_time",align:"center"},{title:"卡号",dataIndex:"card_number",width:"10%",key:"card_number",align:"center"},{title:"开卡形式",dataIndex:"transaction_type",width:"10%",key:"transaction_type",align:"center"},{title:"order-amount",dataIndex:"order_amount",width:"10%",key:"order_amount",align:"center"},{title:"order-currency",dataIndex:"order_currency",width:"10%",key:"order_currency",align:"center"},{title:"result_description",dataIndex:"result_description",width:"10%",key:"result_description",align:"center"},{title:"是否出现在fb账单上",dataIndex:"is_judge",width:"10%",key:"is_judge",scopedSlots:{customRender:"is_judge"},align:"center"}];var J={data(){return{labelCol:{span:5},wrapperCol:{span:16},paginationOption:{pageSizeOptions:["5","10","20"],defaultCurrent:1,defaultPageSize:5,showSizeChanger:!0,showTotal:t=>`共${t}条`,onChange:(t,e)=>{console.log(t,e,"=====pppp"),this.paginationOption.defaultCurrent=t,this.paginationOption.defaultPageSize=e,this.getArticleList()},onShowSizeChange:(t,e)=>{this.paginationOption.defaultCurrent=1,this.paginationOption.defaultPageSize=e,this.getArticleList()},total:0},Articlelist:[],Catelist:[],columns:Z,querydata:{pagesize:0,pagenum:0,card_number:"",transaction_type:"",start_time:"",end_time:"",is_judge:""},time_range:[],dialogVisible:!1,fileList:[],vccBalance:0,vccVisible:!1,options:[{value:"开卡",label:"开卡"},{value:"交易授权",label:"交易授权"},{value:"交易清算",label:"交易清算"},{value:"卡充值",label:"卡充值"},{value:"卡充退",label:"卡充退"},{value:"卡注销",label:"卡注销"}],bridgeOptions:[{value:1,label:"是"},{value:0,label:"否"}],cardNumber_options:[]}},created(){this.getArticleList(),this.getCardNumberOptions()},methods:{showDialog(){this.dialogVisible=!0},handleChangeFile(t){const e=t.file.status;"uploading"!==e&&console.log(t.file,t.fileList),"done"===e?K["a"].success(t.file.name+" 文件上传成功！"):"error"===e&&K["a"].error(t.file.name+" 文件上传失败！")},async showVccBalance(t){const e=await this.$http.post("showVccBalance",{card_number:t});if(console.log(e,e.data.dsg.Number,"=====111"),200!=e.status)return this.$message.error(e.message);this.vccBalance=e.data.dsg.Number,console.log(this.vccBalance),this.vccVisible=!0},handleOk(t){console.log(t),this.dialogVisible=!1},async getArticleList(){var t,e;console.log(this.time_range,"=====>time"),this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=this.paginationOption.defaultCurrent,this.querydata.start_time=null===(t=this.time_range[0])||void 0===t?void 0:t.startOf("day").unix(),this.querydata.end_time=null===(e=this.time_range[1])||void 0===e?void 0:e.endOf("day").unix();const a=""===this.querydata.is_judge?-1:this.querydata.is_judge,s=`showvcc_record?pagesize=${this.querydata.pagesize}&pagenum=${this.querydata.pagenum}&card_number=${this.querydata.card_number||[]}&transaction_type=${this.querydata.transaction_type||[]}&start_time=${this.querydata.start_time}&end_time=${this.querydata.end_time}&is_judge=${a}`,{data:i}=await this.$http.get(s);if(200!=i.code)return this.$message.error(i.message);this.Articlelist=i.data,this.paginationOption.total=i.total},async getCardNumberOptions(){const{data:t}=await this.$http.get("showVccID");if(200!=t.code)return this.$message.error(t.message);this.cardNumber_options=t.data.map(t=>({value:t,label:t})),console.log(this.cardNumber_options,"======>123")},getClear(){this.querydata={pagesize:0,pagenum:0,card_number:"",transaction_type:"",is_judge:-1},this.time_range=[],this.getArticleList()},async findArticle(){this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=1;const{data:t}=await this.$http.post("articles",this.querydata);if(200!=t.status)return this.$message.error(t.message);this.Articlelist=t.data,this.paginationOption.total=t.total},deleteArticle(t){this.$confirm({title:"确定要删除吗？",content:"一旦删除，无法恢复",onOk:async()=>{const{data:e}=await this.$http.delete("article/"+t);if(200!=e.status)return this.$message.error(e.message);this.$message.success("删除成功"),this.getArticleList()},onCancel:()=>{this.$message.info("已取消删除")}})},async getCateList(){const{data:t}=await this.$http.get("category");if(200!=t.status)return this.$message.error(t.message);this.Catelist=t.data,this.pagination.total=t.total},CateChange(t){this.getCateArticle(t)},async getCateArticle(t){const{data:e}=await this.$http.get("article/cate/"+t,{params:{pagesize:this.paginationOption.defaultPageSize,pagenum:this.paginationOption.defaultCurrent}});if(200!=e.status)return this.$message.error(e.message);this.Articlelist=e.data,this.paginationOption.total=e.total},showDialog(){this.dialogVisible=!0}}},Q=J,H=(a("1d81"),Object(d["a"])(Q,T,M,!1,null,"5ddc31e0",null)),G=H.exports,W=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("h3",[t._v("FaceBook文件列表")]),e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:4}},[e("a-cascader",{attrs:{allowClear:"",options:t.accountOptions,placeholder:"请输入FB账号查找"},on:{change:t.getArticleList},model:{value:t.querydata.account,callback:function(e){t.$set(t.querydata,"account",e)},expression:"querydata.account"}})],1),e("a-col",{attrs:{span:4}},[e("a-cascader",{attrs:{allowClear:"",options:t.cardNumber_options,placeholder:"请输入卡号查找"},on:{change:t.getArticleList},model:{value:t.querydata.payment_method,callback:function(e){t.$set(t.querydata,"payment_method",e)},expression:"querydata.payment_method"}})],1),e("a-col",{attrs:{span:5}},[e("a-range-picker",{on:{change:t.getArticleList},model:{value:t.time_range,callback:function(e){t.time_range=e},expression:"time_range"}})],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getArticleList}},[t._v("查询")])],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getClear}},[t._v("置空")])],1)],1),e("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("FaceBook文件导入")]),e("a-button",{staticStyle:{"margin-top":"10px","margin-left":"20px"},attrs:{type:"primary"},on:{click:t.queryTotal}},[t._v("查询卡的总账")]),null!==t.totalAccount?e("span",[t._v(" "+t._s(t.totalAccount)+"元")]):t._e(),e("a-modal",{attrs:{title:"批量导入"},on:{ok:t.handleOk},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e("p",[t._v("为确保导入数据格式正确，请按照格式规范录入数据")]),e("a-upload-dragger",{attrs:{name:"f1",multiple:!0,action:"http://111.90.143.10:39010/api/v1/upload2"},on:{change:t.handleChangeFile},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},[e("p",{staticClass:"ant-upload-drag-icon"},[e("a-icon",{attrs:{type:"cloud-download"}})],1),e("p",{staticClass:"ant-upload-text"},[t._v("点击或将文件拖拽到这里上传")]),e("p",{staticClass:"ant-upload-hint"},[t._v(" 仅支持.csv文件 ")])]),e("div",{staticClass:"upload-tips"},[e("p",[t._v("1.仅支持.csv文件")]),e("p",[t._v("2.导入数量不得超过5000条")]),e("p",[t._v("3.文件大小不得超过3M")])])],1),e("a-table",{attrs:{rowKey:"transaction_id",columns:t.columns,pagination:t.paginationOption,dataSource:t.Articlelist,bordered:""},scopedSlots:t._u([{key:"action",fn:function(a){return[e("a-checkbox",{on:{change:e=>t.judgeIsBox(a.transaction_id,a.note,e.target.checked)},model:{value:a.is_ticked,callback:function(e){t.$set(a,"is_ticked",e)},expression:"text.is_ticked"}})]}},{key:"text",fn:function(a){return[e("a-textarea",{attrs:{"auto-size":""},on:{change:e=>t.judgeIsBox(a.transaction_id,a.note,a.is_ticked)},model:{value:a.note,callback:function(e){t.$set(a,"note",e)},expression:"text.note"}})]}}])},[e("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e("div",{staticStyle:{display:"flex"}},[t._v("时间 "),e("span",{staticClass:"icon-type"},[e("a-icon",{attrs:{type:"caret-up"},on:{click:function(e){return t.getSortArticleList(0)}}}),e("a-icon",{attrs:{type:"caret-down"},on:{click:function(e){return t.getSortArticleList(1)}}})],1)])])])],1)],1)},X=[];const Y=[{title:"FB账户",dataIndex:"account",width:"13%",key:"account",align:"center"},{slots:{title:"customTitle"},dataIndex:"date",width:"12%",key:"date",align:"center"},{title:"交易号",dataIndex:"transaction_id",width:"15%",key:"transaction_id",align:"center"},{title:"交易所用虚拟卡",dataIndex:"payment_method",width:"10%",key:"payment_method",align:"center"},{title:"order-amount",dataIndex:"amount",width:"10%",key:"amount",align:"center"},{title:"order-amount",dataIndex:"currency",width:"10%",key:"currency",align:"center"},{title:"标记",width:"10%",key:"action",scopedSlots:{customRender:"action"},align:"center"},{title:"备注",width:"10%",key:"text",scopedSlots:{customRender:"text"},align:"center"}];var tt={data(){return{labelCol:{span:5},wrapperCol:{span:16},paginationOption:{pageSizeOptions:["5","10","20"],defaultCurrent:1,defaultPageSize:5,showSizeChanger:!0,showTotal:t=>`共${t}条`,onChange:(t,e)=>{this.paginationOption.defaultCurrent=t,this.paginationOption.defaultPageSize=e,this.getArticleList()},onShowSizeChange:(t,e)=>{this.paginationOption.defaultCurrent=1,this.paginationOption.defaultPageSize=e,this.getArticleList()},total:0},Articlelist:[],Catelist:[],columns:Y,querydata:{pagesize:0,pagenum:0,account:"",payment_method:"",start_time:"",end_time:""},updateParams:{transaction_id:"",is_ticked:"",note:""},time_range:[],dialogVisible:!1,fileList:[],vccBalence:0,vccVisible:!1,updateFBList:{transaction_id:"",is_ticked:!1,note:""},accountOptions:[],cardNumber_options:[],accountNumber:"",totalAccount:null}},created(){this.getArticleList(),this.getAccountOptions(),this.getCardNumberOptions()},methods:{showDialog(){this.dialogVisible=!0},handleChangeFile(t){const e=t.file.status;"uploading"!==e&&console.log(t.file,t.fileList),"done"===e?K["a"].success(t.file.name+" 文件上传成功！"):"error"===e&&K["a"].error(t.file.name+" 文件上传失败！")},handleOk(t){console.log(t),this.dialogVisible=!1},async showVccBalance(t){const e=await this.$http.post("showVccBalance",{card_number:t});if(console.log(e,"=====111"),200!=e.status)return this.$message.error(e.message);this.vccBalence=data.vccBalence,this.vccVisible=!0},gotoEditArt(t){alert(t),this.$router.push("/addart/"+t)},async getArticleList(){var t,e;this.getCardNumberOptions(),this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=this.paginationOption.defaultCurrent,this.querydata.start_time=null===(t=this.time_range[0])||void 0===t?void 0:t.startOf("day").unix(),this.querydata.end_time=null===(e=this.time_range[1])||void 0===e?void 0:e.endOf("day").unix();const a=`showfb_record?pagesize=${this.querydata.pagesize}&pagenum=${this.querydata.pagenum}&account=${this.querydata.account||[]}&payment_method=${this.querydata.payment_method||[]}&start_time=${this.querydata.start_time}&end_time=${this.querydata.end_time}&set=0`,{data:s}=await this.$http.get(a);if(console.log(s,"====88"),200!=s.code)return this.$message.error(s.message);this.Articlelist=s.data,console.log(this.Articlelist,"=====>xihuan"),this.paginationOption.total=s.tatal},async getSortArticleList(t){var e,a;this.getCardNumberOptions(),this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=this.paginationOption.defaultCurrent,this.querydata.start_time=null===(e=this.time_range[0])||void 0===e?void 0:e.startOf("day").unix(),this.querydata.end_time=null===(a=this.time_range[1])||void 0===a?void 0:a.endOf("day").unix();const s=`showfb_record?pagesize=${this.querydata.pagesize}&pagenum=${this.querydata.pagenum}&account=${this.querydata.account}&payment_method=${this.querydata.payment_method}&start_time=${this.querydata.start_time}&end_time=${this.querydata.end_time}&set=${t}`,{data:i}=await this.$http.get(s);if(console.log(i,"====88"),200!=i.code)return this.$message.error(i.message);this.Articlelist=i.data,console.log(this.Articlelist,"=====>xihuan"),this.paginationOption.total=i.tatal},async getAccountOptions(){const{data:t}=await this.$http.get("showFBID?account=");if(200!=t.code)return this.$message.error(t.message);this.accountOptions=t.data1.map(t=>({value:t,label:t})),this.getCardNumberOptions()},async getCardNumberOptions(){const{data:t}=await this.$http.get("showFBID?account="+this.querydata.account);if(200!=t.code)return this.$message.error(t.message);this.cardNumber_options=t.data2.map(t=>({value:t,label:t})),console.log(this.cardNumber_options,"======>123")},getClear(){this.querydata={pagesize:0,pagenum:0,card_number:"",transaction_type:"",start_time:"",end_time:""},this.time_range=[],this.getArticleList()},async findArticle(){this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=1;const{data:t}=await this.$http.post("articles",this.querydata);if(200!=t.status)return this.$message.error(t.message);this.Articlelist=t.data,this.paginationOption.total=t.total},deleteArticle(t){this.$confirm({title:"确定要删除吗？",content:"一旦删除，无法恢复",onOk:async()=>{const{data:e}=await this.$http.delete("article/"+t);if(200!=e.status)return this.$message.error(e.message);this.$message.success("删除成功"),this.getArticleList()},onCancel:()=>{this.$message.info("已取消删除")}})},async getCateList(){const{data:t}=await this.$http.get("category");if(200!=t.status)return this.$message.error(t.message);this.Catelist=t.data,this.paginationOption.total=t.total},CateChange(t){this.getCateArticle(t)},async getCateArticle(t){const{data:e}=await this.$http.get("article/cate/"+t,{params:{pagesize:this.paginationOption.defaultPageSize,pagenum:this.paginationOption.defaultCurrent}});if(200!=e.status)return this.$message.error(e.message);this.Articlelist=e.data,this.paginationOption.total=e.total},showDialog(){this.dialogVisible=!0},async judgeIsBox(t,e,a){console.log(t,a,e,"=========>12345"),this.updateFBList.transaction_id=t,this.updateFBList.is_ticked=a,this.updateFBList.note=e;const{data:s}=await this.$http.post("updateFBList",this.updateFBList);if(200!=s.code)return this.$message.error(s.message);this.getArticleList()},async queryTotal(){var t,e;if(this.querydata.start_time=null===(t=this.time_range[0])||void 0===t?void 0:t.startOf("day").unix(),this.querydata.end_time=null===(e=this.time_range[1])||void 0===e?void 0:e.endOf("day").unix(),""!==this.querydata.payment_method){const{data:t}=await this.$http.get(`showFBDataByaccount?account=${this.querydata.account}&payment_method=${this.querydata.payment_method}&start_time=${this.querydata.start_time}&end_time=${this.querydata.end_time}`);if(200!=t.status)return this.$message.error(t.message);this.totalAccount=t.data}else K["a"].error("未填写卡号")}}},et=tt,at=(a("9d8e"),Object(d["a"])(et,W,X,!1,null,"9384facc",null)),st=at.exports,it=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("h3",[t._v("虚拟卡余额和消耗计算")]),e("a-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[e("a-col",{attrs:{span:4}},[e("a-cascader",{attrs:{allowClear:"",options:t.cardNumber_options,placeholder:"请输入卡号查找"},on:{change:t.getVirtualCard},model:{value:t.queryParams.id,callback:function(e){t.$set(t.queryParams,"id",e)},expression:"queryParams.id"}})],1),e("a-col",{attrs:{span:5}},[e("a-range-picker",{on:{change:t.getVirtualCard},model:{value:t.time_range,callback:function(e){t.time_range=e},expression:"time_range"}})],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.get}},[t._v("查询")])],1),e("a-col",{attrs:{span:2}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getClear}},[t._v("置空")])],1)],1),e("a-table",{attrs:{rowKey:(t,e)=>e,columns:t.columns,pagination:t.paginationOption,dataSource:t.virtualCardList,bordered:""}})],1)],1)},nt=[];const rt=[{title:"卡号",dataIndex:"card_number",width:"10%",key:"card_number",align:"center"},{title:"余额",dataIndex:"Balance",width:"15%",key:"Balance",align:"center"},{title:"总消耗",dataIndex:"Deplete",width:"15%",key:"Deplete",align:"center"}];var ot={data(){return{labelCol:{span:5},wrapperCol:{span:16},columns:rt,querydata:{card_number:"",year:"",month:""},paginationOption:{pageSizeOptions:["5","10","20"],defaultCurrent:1,defaultPageSize:5,showSizeChanger:!0,showTotal:t=>`共${t}条`,onChange:(t,e)=>{this.paginationOption.defaultCurrent=t,this.paginationOption.defaultPageSize=e,this.getArticleList()},onShowSizeChange:(t,e)=>{this.paginationOption.defaultCurrent=1,this.paginationOption.defaultPageSize=e,this.getArticleList()},total:0},virtualCardNumber:[],virtualCardList:[],month_consumption:"",queryParams:{pagesize:0,pagenum:0,id:"",start_time:"",end_time:""},time_range:[],cardNumber_options:[]}},created(){this.getVirtualCard(),this.getCardNumberOptions()},methods:{async getVirtualCard(){var t,e;this.queryParams.pagesize=this.paginationOption.defaultPageSize,this.queryParams.pagenum=this.paginationOption.defaultCurrent,this.querydata.start_time=null===(t=this.time_range[0])||void 0===t?void 0:t.startOf("day").unix(),this.querydata.end_time=null===(e=this.time_range[1])||void 0===e?void 0:e.endOf("day").unix();const a=0===this.queryParams.id?"":this.queryParams.id,{data:s}=await this.$http.get(`showVccBalanceAndDeplete?pagesize=${this.queryParams.pagesize}&pagenum=${this.queryParams.pagenum}&id=${a}&start_time=${this.querydata.start_time}&end_time=${this.querydata.end_time}`);if(200!=s.code)return this.$message.error(s.message);console.log(s.data.CurrentPage,"=====>虚拟卡"),this.virtualCardList=Object.entries(s.data.CurrentPage).map(([t,e])=>({card_number:t,...e}))},getClear(){this.queryParams={pagesize:0,pagenum:0,id:"",start_time:"",end_time:""},this.time_range=[],this.getVirtualCard()},async getCardNumberOptions(){const{data:t}=await this.$http.get("showVccID");if(200!=t.code)return this.$message.error(t.message);this.cardNumber_options=t.data.map(t=>({value:t,label:t})),console.log(this.cardNumber_options,"======>123")}}},lt=ot,ct=(a("8bf9"),Object(d["a"])(lt,it,nt,!1,null,"b7296d3e",null)),dt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("用户列表")]),e("a-card",{attrs:{bordered:!1}},[e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:6}},[e("a-input-search",{attrs:{placeholder:"请输入用户名或id查找","enter-button":""},on:{search:t.findUser},model:{value:t.querydata.username,callback:function(e){t.$set(t.querydata,"username",e)},expression:"querydata.username"}})],1),e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.addUserVisible=!0}}},[t._v("新增")])],1)],1),e("a-table",{attrs:{rowKey:"ID",columns:t.columns,pagination:t.paginationOption,dataSource:t.userlist,bordered:""},scopedSlots:t._u([{key:"role",fn:function(a){return e("span",{},[t._v(t._s(1==a?"管理员":"用户"))])}},{key:"action",fn:function(a){return[e("div",{staticClass:"actionSlot"},[e("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(e){return t.editUser(a.ID)}}},[t._v("编辑")]),e("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteUser(a.ID)}}},[t._v("删除")])],1)]}}])})],1),e("a-modal",{attrs:{closable:"",title:"新增用户",visible:t.addUserVisible,destroyOnClose:!0},on:{ok:t.addUserOk,cancel:t.addUserCancel}},[e("a-form-model",{ref:"addUserRef",attrs:{model:t.userInfo,rules:t.userRules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{"has-feedback":"",label:"用户名",prop:"username"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUserOk.apply(null,arguments)}},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"密码",prop:"password"}},[e("a-input",{attrs:{type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUserOk.apply(null,arguments)}},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"确认密码",prop:"chcekpass"}},[e("a-input",{attrs:{type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUserOk.apply(null,arguments)}},model:{value:t.userInfo.chcekpass,callback:function(e){t.$set(t.userInfo,"chcekpass",e)},expression:"userInfo.chcekpass"}})],1),e("a-form-model-item",{attrs:{label:"是否为管理员",prop:"role"}},[e("a-select",{staticStyle:{width:"60px"},attrs:{defaultValue:"2"},on:{change:t.adminChange}},[e("a-select-option",{key:"1",attrs:{value:"1"}},[t._v("是")]),e("a-select-option",{key:"2",attrs:{value:"2"}},[t._v("否")])],1)],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"邮箱",prop:"email"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addUserOk.apply(null,arguments)}},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1)],1)],1),e("a-modal",{attrs:{closable:"",title:"编辑用户",visible:t.editUserVisible},on:{ok:t.editUserOk,cancel:t.editUserCancel}},[e("a-form-model",{ref:"editUserRef",attrs:{model:t.userInfo,rules:t.userRules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{"has-feedback":"",label:"用户名",prop:"username"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"姓名",prop:"name"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.nameInfo.name,callback:function(e){t.$set(t.nameInfo,"name",e)},expression:"nameInfo.name"}})],1),e("a-form-model-item",{attrs:{label:"角色",prop:"role"}},[e("a-select",{staticStyle:{width:"100px"},attrs:{defaultValue:String(t.userInfo.role)},on:{change:t.adminChange}},[e("a-select-option",{key:"1",attrs:{value:"1"}},[t._v("管理员")]),e("a-select-option",{key:"2",attrs:{value:"2"}},[t._v("用户")])],1)],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"密码修改",prop:"name"}},[e("a-input",{attrs:{type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.passwordInfo.pwd,callback:function(e){t.$set(t.passwordInfo,"pwd",e)},expression:"passwordInfo.pwd"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"确认密码",prop:"name"}},[e("a-input",{attrs:{type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.passwordInfo.pwdNew,callback:function(e){t.$set(t.passwordInfo,"pwdNew",e)},expression:"passwordInfo.pwdNew"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"邮箱",prop:"email"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.userInfo.email,callback:function(e){t.$set(t.userInfo,"email",e)},expression:"userInfo.email"}})],1),e("a-form-model-item",{attrs:{"has-feedback":"",label:"手机号",prop:"name"}},[e("a-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editUserOk.apply(null,arguments)}},model:{value:t.nameInfo.qq_chat,callback:function(e){t.$set(t.nameInfo,"qq_chat",e)},expression:"nameInfo.qq_chat"}})],1)],1)],1)],1)},pt=[];a("d9e2");const mt=[{title:"ID",dataIndex:"ID",width:"10%",key:"id",align:"center"},{title:"用户名",dataIndex:"username",width:"20%",key:"username",align:"center"},{title:"角色",dataIndex:"role",width:"20%",key:"role",align:"center",scopedSlots:{customRender:"role"}},{title:"创建时间",dataIndex:"CreatedAt",width:"20%",key:"CreatedAt",align:"center"},{title:"操作",width:"20%",key:"action",scopedSlots:{customRender:"action"},align:"center"}];var ht={data(){return{labelCol:{span:5},wrapperCol:{span:16},paginationOption:{pageSizeOptions:["5","10","20"],defaultCurrent:1,defaultPageSize:5,total:0,showSizeChanger:!0,showTotal:t=>`共${t}条`,onChange:(t,e)=>{this.paginationOption.defaultCurrent=t,this.paginationOption.defaultPageSize=e,this.getUserList()},onShowSizeChange:(t,e)=>{this.paginationOption.defaultCurrent=1,this.paginationOption.defaultPageSize=e,this.getUserList()}},userlist:[],columns:mt,querydata:{pagesize:0,pagenum:0,username:""},addUserVisible:!1,editUserVisible:!1,userInfo:{id:0,username:"",password:"",chcekpass:"",role:2,email:""},nameInfo:{id:0,name:"",desc:"",qq_chat:"",wechat:"",weibo:"",bili:"",email:"",img:"",avatar:"",icp_record:"",phone:""},passwordInfo:{pwd:"",pwdNew:""},userRules:{username:[{validator:(t,e,a)=>{""==this.userInfo.username&&a(new Error("请输入用户名")),[...this.userInfo.username].length<4||[...this.userInfo.password].length>12?a(new Error("用户名长度应该在4-12位之间")):a()},trigger:"blur"}],password:[{validator:(t,e,a)=>{""==this.userInfo.password&&a(new Error("请输入密码")),[...this.userInfo.password].length<6||[...this.userInfo.password].length>20?a(new Error("密码长度应该在6-20位之间")):a()},trigger:"blur"}],chcekpass:[{validator:(t,e,a)=>{""==this.userInfo.password&&a(new Error("请输入密码")),this.userInfo.password!=this.userInfo.chcekpass?a(new Error("密码不一致，请重新输入")):a()},trigger:"blur"}],email:[{pattern:"^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(.[a-zA-Z0-9-]+)*.[a-zA-Z0-9]{2,6}$",message:"请输入正确的邮箱",trigger:"blur"}]}}},created(){this.getUserList()},methods:{async getUserList(){this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=this.paginationOption.defaultCurrent;const{data:t}=await this.$http.get("users");if(200!=t.status)return this.$message.error(t.message);this.userlist=t.data,this.paginationOption.total=t.total},async findUser(){this.querydata.pagesize=this.paginationOption.defaultPageSize,this.querydata.pagenum=1;const{data:t}=await this.$http.post("users",this.querydata);if(200!=t.status)return this.$message.error(t.message);this.userlist=t.data,this.paginationOption.total=t.total},deleteUser(t){this.$confirm({title:"确定要删除吗？",content:"一旦删除，无法恢复",onOk:async()=>{const{data:e}=await this.$http.delete("user/"+t);if(200!=e.status)return this.$message.error(e.message);this.$message.success("删除成功"),this.getUserList()},onCancel:()=>{this.$message.info("已取消删除")}})},addUserOk(){this.$refs.addUserRef.validate(async t=>{if(!t)return this.$message.error("输入不符合要求，请重新输入");const{data:e}=await this.$http.post("user/add",this.userInfo);if(200!=e.status)return this.$message.error(e.message);this.$message.success("添加成功"),this.addUserVisible=!1,this.getUserList()})},addUserCancel(){this.$refs.addUserRef.resetFields(),this.addUserVisible=!1,this.$message.info("新增用户已取消")},adminChange(t){this.userInfo.role=Number(t)},async editUser(t){const{data:e}=await this.$http.get("user/"+t),{data:a}=await this.$http.get("admin/profile/"+t);this.userInfo.username=e.data.username,this.userInfo.role=Number(e.data.role),this.userInfo.email=e.data.email,this.userInfo.id=t,this.nameInfo.name=a.data.name,this.nameInfo.qq_chat=a.data.qq_chat,this.editUserVisible=!0},editUserOk(){this.$refs.editUserRef.validate(async t=>{if(!t)return this.$message.error("输入不符合要求，请重新输入");if(this.passwordInfo.pwd!==this.passwordInfo.pwdNew)return this.$message.error("两次输入密码不一致");const{data:e}=await this.$http.put("user/"+this.userInfo.id,{username:this.userInfo.username}),{data:a}=await this.$http.put("profile/"+this.userInfo.id,this.nameInfo),{data:s}=await this.$http.put("admin/changepw/"+this.userInfo.id,{password:this.passwordInfo.pwd});if(200!=e.status||200!=a.status||200!=s.status)return this.$message.error(e.message);this.$message.success("用户信息更新成功"),this.editUserVisible=!1,this.userInfo.email="",this.userInfo.username="",this.getUserList()})},editUserCancel(){this.editUserVisible=!1,this.userInfo.email="",this.userInfo.username="",this.$message.info("编辑已取消")}}},ft=ht,gt=(a("09ba"),Object(d["a"])(ft,ut,pt,!1,null,"02b448de",null)),yt=gt.exports,bt=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("个人设置")]),e("a-card",[e("a-form-model",{attrs:{model:t.profileInfo,hideRequiredMark:!0}},[e("a-form-model-item",{attrs:{label:"作者名称"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.name,callback:function(e){t.$set(t.profileInfo,"name",e)},expression:"profileInfo.name"}})],1),e("a-form-model-item",{attrs:{label:"个人简介"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.desc,callback:function(e){t.$set(t.profileInfo,"desc",e)},expression:"profileInfo.desc"}})],1),e("a-form-model-item",{attrs:{label:"QQ"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.qq_chat,callback:function(e){t.$set(t.profileInfo,"qq_chat",e)},expression:"profileInfo.qq_chat"}})],1),e("a-form-model-item",{attrs:{label:"微信"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.wechat,callback:function(e){t.$set(t.profileInfo,"wechat",e)},expression:"profileInfo.wechat"}})],1),e("a-form-model-item",{attrs:{label:"微博"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.weibo,callback:function(e){t.$set(t.profileInfo,"weibo",e)},expression:"profileInfo.weibo"}})],1),e("a-form-model-item",{attrs:{label:"Email"}},[e("a-input",{staticStyle:{width:"300px"},model:{value:t.profileInfo.email,callback:function(e){t.$set(t.profileInfo,"email",e)},expression:"profileInfo.email"}})],1),e("a-form-model-item",{attrs:{label:"头像"}},[e("a-upload",{attrs:{name:"file",multiple:!1,action:t.upUrl,headers:t.headers,listType:"picture"},on:{change:t.avatarChange}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),t._v(" 点击上传 ")],1),e("br"),t.profileInfo.id?[e("img",{staticStyle:{width:"120px",height:"90px"},attrs:{src:t.profileInfo.avatar}})]:t._e()],2)],1),e("a-form-model-item",{attrs:{label:"头像背景"}},[e("a-upload",{attrs:{name:"file",multiple:!1,action:t.upUrl,headers:t.headers,listType:"picture"},on:{change:t.imgChange}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),t._v(" 点击上传 ")],1),e("br"),t.profileInfo.id?[e("img",{staticStyle:{width:"120px",height:"90px"},attrs:{src:t.profileInfo.img}})]:t._e()],2)],1),e("a-form-model-item",[e("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"danger"},on:{click:function(e){return t.updateProfile()}}},[t._v(" 更新 ")])],1)],1)],1)],1)},_t=[],kt=a("bc3a"),vt=a.n(kt);let wt="http://111.90.143.10:39010/api/v1";vt.a.defaults.baseURL=wt,vt.a.interceptors.request.use(t=>{t.headers||(t.headers={});const e=window.sessionStorage.getItem("token");return e&&(t.headers.Authorization="Bearer "+e),t}),s["a"].prototype.$http=vt.a;var jt={data(){return{profileInfo:{id:0,name:"",desc:"",qq_chat:"",wechat:"",weibo:"",email:"",img:"",avatar:""},upUrl:wt+"/upload",headers:{}}},created(){this.headers={Authorization:"Bearer "+window.sessionStorage.getItem("token")},this.getProfile()},methods:{async getProfile(){const{data:t}=await this.$http.get("profile");if(200!=t.status)return this.$message.error(t.message);this.profileInfo=t.data},avatarChange(t){if("uploading"!==t.file.status&&console.log(t.file,t.fileList),"done"===t.file.status){const e=t.file.response.url;this.profileInfo.avatar=e,this.$message.success("图片上传成功")}else"error"===t.file.status&&this.$message.error("图片上传失败")},imgChange(t){if("uploading"!==t.file.status&&console.log(t.file,t.fileList),"done"===t.file.status){const e=t.file.response.url;this.profileInfo.img=e,this.$message.success("图片上传成功")}else"error"===t.file.status&&this.$message.error("图片上传失败")},async updateProfile(){const{data:t}=await this.$http.put("profile",this.profileInfo);if(200!=t.status)return this.$message.error(t.message);this.profileInfo=t.data,this.$router.push("/index")}}},$t=jt,xt=Object(d["a"])($t,bt,_t,!1,null,"2eb3580a",null),Ct=xt.exports,Ot=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{bordered:!1}},[e("h3",[t._v("FB虚拟卡扣款")]),e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:6}},[e("a-input-search",{attrs:{placeholder:"请输入账户查找","enter-button":"",label:"账户"},on:{search:t.getAccountAllList},model:{value:t.querydata.account,callback:function(e){t.$set(t.querydata,"account",e)},expression:"querydata.account"}})],1),e("a-col",{attrs:{span:6}},[e("a-input-search",{attrs:{placeholder:"请输入卡号查找","enter-button":"",la:""},on:{search:t.getAccountAllList},model:{value:t.querydata.payment_method,callback:function(e){t.$set(t.querydata,"payment_method",e)},expression:"querydata.payment_method"}})],1),e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{type:"primary"},on:{click:t.getAccountAllList}},[t._v("查询")])],1),e("a-col",{attrs:{span:4}},[e("a-button",{attrs:{type:"primary"},on:{click:t.queryTotal}},[t._v("查询卡的总账")]),null!==t.totalAccount?e("span",[t._v(" "+t._s(t.totalAccount))]):t._e()],1)],1),e("a-table",{attrs:{rowKey:(t,e)=>e,columns:t.columns,pagination:t.paginationOption,dataSource:t.Articlelist,bordered:""}},[e("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[e("div",{staticStyle:{display:"flex"}},[t._v("时间 "),e("span",{staticClass:"icon-type"},[e("a-icon",{attrs:{type:"caret-up"},on:{click:function(e){return t.sortList(1)}}}),e("a-icon",{attrs:{type:"caret-down"},on:{click:function(e){return t.sortList(2)}}})],1)])])])],1)],1)},qt=[];const It=[{title:"卡号",dataIndex:"card_number",width:"20%",key:"card_number",align:"center"},{slots:{title:"customTitle"},dataIndex:"Date",width:"20%",key:"Date",align:"center"},{title:"扣费数额",dataIndex:"Amount",width:"20%",key:"Amount",align:"center"}];var zt={data(){return{labelCol:{span:5},wrapperCol:{span:16},Articlelist:[],Catelist:[],columns:It,querydata:{payment_method:"",account:""},dialogVisible:!1,fileList:[],vccBalence:0,vccVisible:!1,updateFBList:{transaction_id:"",is_ticked:!1,note:""},resultArr:[],isCardAndAccount:!1,totalAccount:null}},created(){this.getAccountAllList()},methods:{async getAccountAllList(){if(""!==this.querydata.account&&""===this.querydata.payment_method){const{data:t}=await this.$http.post("showfb_vccdata",{account:this.querydata.account});if(200!=t.code)return this.$message.error(t.message);for(const[e,a]of Object.entries(t.data))for(const t of a)this.resultArr.push({card_number:e,...t});this.Articlelist=this.resultArr}else if(""!==this.querydata.account&&""!==this.querydata.payment_method){this.isCardAndAccount=!0;const{data:t}=await this.$http.post("showFBByaccountList",{account:this.querydata.account,payment_method:this.querydata.payment_method});if(200!=t.code)return this.$message.error(t.message);this.Articlelist=t.data.map(t=>({card_number:this.querydata.payment_method,Date:t.date,Amount:t.amount}))}},async queryTotal(){if(""!==this.querydata.payment_method){const{data:t}=await this.$http.post("showFBDataByaccount",{account:this.querydata.account,payment_method:this.querydata.payment_method});if(200!=t.status)return this.$message.error(t.message);this.totalAccount=t.data}else message.error("未填写卡号")},async sortList(t){}}},At=zt,St=(a("248e"),Object(d["a"])(At,Ot,qt,!1,null,"5bbb4ba8",null)),Lt=St.exports;s["a"].use(m["a"]);const Ut=[{path:"/login",name:"login",component:k},{path:"/",name:"admin ",component:V,children:[{path:"index",component:E},{path:"addart",component:G},{path:"artlist",component:st},{path:"queryCard",component:Lt},{path:"catelist",component:dt},{path:"userlist",component:yt},{path:"profile",component:Ct,props:!0}]}],Pt=new m["a"]({mode:"history",base:"/admin/",routes:Ut});Pt.beforeEach((t,e,a)=>{const i=window.sessionStorage.getItem("token");if(console.log("token",i),"/login"===t.path)return a();i||"/"!==t.path?a():(s["a"].prototype.$message.error("请先登录"),a("/login"))});var Bt=Pt,Vt=(a("20c5"),a("bb76")),Nt=(a("519e"),a("0bb7")),Ft=(a("b8e1"),a("2f50")),Rt=(a("7a59"),a("39ab")),Dt=(a("02cf"),a("9839")),Et=(a("5b61"),a("4df5")),Tt=(a("1815"),a("e32c")),Mt=(a("50ac"),a("9a63")),Kt=(a("0723"),a("0020")),Zt=(a("19ac"),a("cdeb")),Jt=(a("b6e5"),a("55f1")),Qt=(a("d2a2"),a("98c5")),Ht=(a("805a"),a("0c63")),Gt=(a("a71a"),a("b558")),Wt=(a("b4bf"),a("ff57")),Xt=(a("e1f5"),a("5efb")),Yt=(a("04f3"),a("ed3b"));K["a"].config({top:"100px",duration:2,maxCount:3}),s["a"].prototype.$message=K["a"],s["a"].prototype.$confirm=Yt["a"].confirm,s["a"].use(Xt["a"]),s["a"].use(Wt["a"]),s["a"].use(Gt["a"]),s["a"].use(Ht["a"]),s["a"].use(Qt["a"]),s["a"].use(Jt["a"]),s["a"].use(Zt["a"]),s["a"].use(Kt["a"]),s["a"].use(Mt["a"]),s["a"].use(Tt["a"]),s["a"].use(Et["a"]),s["a"].use(Yt["a"]),s["a"].use(Dt["b"]),s["a"].use(Rt["a"]),s["a"].use(Ft["a"]),s["a"].use(Nt["a"]),s["a"].use(Vt["a"]);a("6672");s["a"].use(g["a"]);var te=new g["a"].Store({state:{userRole:null},mutations:{setUserRole(t,e){t.userRole=e}},actions:{updateUserRole({commit:t},e){t("setUserRole",e)}}});s["a"].prototype.$store=te,s["a"].config.productionTip=!1,new s["a"]({router:Bt,render:t=>t(p)}).$mount("#app")},6395:function(t,e,a){},6672:function(t,e,a){},"70ba":function(t,e,a){},"763f":function(t,e,a){},"7d6f":function(t,e,a){},"7f01":function(t,e,a){},"836c":function(t,e,a){},"8bf9":function(t,e,a){"use strict";a("cc93")},"9d8e":function(t,e,a){"use strict";a("0c6a")},bfd7:function(t,e,a){"use strict";a("6395")},cc93:function(t,e,a){},df48:function(t,e,a){}});
//# sourceMappingURL=app.13c2460d.js.map